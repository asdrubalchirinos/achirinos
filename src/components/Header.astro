---
const { lang = "en" } = Astro.props as { lang?: "en" | "es" };

const translations = {
  en: {
    home: "Home",
    philosophy: "Philosophy",
    resume: "Resume",
    projects: "Projects",
    blog: "Blog",
  },
  es: {
    home: "Inicio",
    philosophy: "Filosofía",
    resume: "Currículum",
    projects: "Proyectos",
    blog: "Blog",
  },
};

const t = translations[lang];

const homeHref = lang === "en" ? "/en" : "/";

const links = [
  { href: homeHref, label: t.home },
  { href: `/${lang === "en" ? "en" : "es"}/philosophy`, label: t.philosophy },
  { href: `/${lang === "en" ? "en" : "es"}/resume`, label: t.resume },
  { href: `/${lang === "en" ? "en" : "es"}/projects`, label: t.projects },
  { href: "https://www.codigoergosum.com", label: `${t.blog} ↗` },
];

const otherLang = lang === "en" ? "es" : "en";
const otherLangLabel = lang === "en" ? "ES" : "EN";
const currentPath = Astro.url.pathname;

let otherLangPath;
if (lang === "en") {
  // English -> Spanish
  if (currentPath === "/en" || currentPath === "/en/") {
    otherLangPath = "/";
  } else {
    otherLangPath = currentPath.replace(/^\/en/, "/es");
  }
} else {
  // Spanish -> English
  if (currentPath === "/" || currentPath === "/es" || currentPath === "/es/") {
    otherLangPath = "/en";
  } else {
    otherLangPath = currentPath.replace(/^\/es/, "/en");
  }
}
---

<header class="flex justify-between items-center py-4">
  <nav>
    <ul class="flex space-x-4 items-center">
      {
        links.map((link) => (
          <li>
            <a
              href={link.href}
              class="text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors"
            >
              {link.label}
            </a>
          </li>
        ))
      }
      <li>
        <a
          href={otherLangPath}
          class="font-bold text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors ml-4 border border-gray-200 dark:border-gray-700 rounded px-2 py-1 text-xs"
        >
          {otherLangLabel}
        </a>
      </li>
    </ul>
  </nav>
</header>
